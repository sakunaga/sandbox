#!/bin/bash

cd ~/sandbox/next

# 現在のディレクトリ内のフォルダリストを取得（「.」を除外）
folders=($(find . -maxdepth 1 -type d | sort | sed '1d; s|^\./||'))

# フォルダが存在しない場合のチェック
if [ ${#folders[@]} -eq 0 ]; then
    echo "プロジェクトがありません。"
    exit 1
fi

# フォルダリストを表示
echo "プロジェクトを選択してください:"
for i in "${!folders[@]}"; do
    echo "$((i+1))) ${folders[i]}"
done

# ユーザーの入力を待つ
read -p "番号を入力してください: " choice

# 入力が有効な範囲内かチェック
if [[ "$choice" =~ ^[0-9]+$ ]] && [ "$choice" -ge 1 ] && [ "$choice" -le "${#folders[@]}" ]; then
    selected_folder="${folders[$((choice-1))]}"
    
    # 選択されたフォルダをVSCodeで開く
    code "$selected_folder"
    echo "プロジェクト $selected_folder をVSCodeで起動しました。"
else
    echo "無効な選択です。"
    exit 1
fi
